{"version":3,"sources":["./src/pages/feed/services/feed/feed.service.ts"],"names":[],"mappings":"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","file":"default~pages-feed-feed-module~pages-profile-profile-module-es5.js","sourcesContent":["import { Injectable, Injector } from '@angular/core';\r\nimport * as firebase from 'firebase/app';\r\nimport { combineLatest, of } from 'rxjs';\r\nimport { map, switchMap } from 'rxjs/operators';\r\nimport { AuthService } from 'src/pages/auth/services/auth/auth.service';\r\nimport { Extender } from 'src/shared/helpers/extender';\r\nimport { ITabView } from 'src/shared/helpers/models';\r\nimport { FirestoreService } from 'src/shared/services/firestore/firestore.service';\r\nimport { isArray } from 'util';\r\nimport { IComment } from '../../models/comment';\r\nimport { IFeed } from '../../models/feed';\r\n\r\n/**\r\n * crud methods to interact with firebase cloud store regarding feed posts\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FeedService extends Extender {\r\n  public get views(): ITabView[] {\r\n    return [\r\n      {\r\n        id: 1,\r\n        icon: 'albums',\r\n        name: this.translate.instant('feed-component.minimal'),\r\n        active: true\r\n      },\r\n      {\r\n        id: 2,\r\n        icon: 'paper',\r\n        name: this.translate.instant('feed-component.timeline')\r\n      },\r\n      {\r\n        id: 3,\r\n        icon: 'browsers',\r\n        name: this.translate.instant('feed-component.showcase')\r\n      },\r\n      {\r\n        id: 4,\r\n        icon: 'cube',\r\n        name: this.translate.instant('feed-component.modern')\r\n      }\r\n    ];\r\n  }\r\n  private comments: IComment[];\r\n  private feed: IFeed[] = [];\r\n\r\n  constructor(protected injector: Injector, private authService: AuthService, private firestoreService: FirestoreService) {\r\n    super(injector);\r\n  }\r\n\r\n  /** get feed from fire base cloud store, set default likes and comments array to empty array if not already set */\r\n  public getFeed(uid: string) {\r\n    return this.firestoreService\r\n      .colWithIds$<IFeed>(`feed`, (ref: any) => ref.orderBy('createdAt', 'desc').limit(50))\r\n      .pipe(\r\n        switchMap((_feed: IFeed[]) => {\r\n          const reads = [];\r\n          this.feed = _feed.map((item) => {\r\n            item.likes = !item.likes ? [] : item.likes;\r\n            item.comments = !item.comments ? [] : item.comments;\r\n            return item;\r\n          });\r\n          this.feed.forEach((item: IFeed) => {\r\n            reads.push(this.firestoreService.doc$(`users/${item.uid}`));\r\n          });\r\n          return combineLatest(reads);\r\n        }),\r\n        map((data: any) => {\r\n          return (this.feed = this.feed.map((item: IFeed, index: number) => {\r\n            return {\r\n              ...item,\r\n              userLiked: item.likes && isArray(item.likes) ? item.likes.includes(uid) : false,\r\n              user: data[index] || null\r\n            };\r\n          }));\r\n        })\r\n      );\r\n  }\r\n\r\n  public getUserFeed(uid) {\r\n    return this.firestoreService.colWithIds$<IFeed>(`feed`, (ref: any) => ref.where('uid', '==', uid));\r\n  }\r\n\r\n  /** get a single post from feed collection in firestore and join its user and comments */\r\n  public getPost(pid: string, uid: string) {\r\n    let feed;\r\n    return this.firestoreService.doc$(`feed/${pid}`).pipe(\r\n      switchMap((_feed: IFeed) => {\r\n        _feed.likes = !_feed.likes ? [] : _feed.likes;\r\n        _feed.comments = !_feed.comments ? [] : _feed.comments;\r\n        feed = _feed;\r\n        const docs = [];\r\n        docs.push(this.firestoreService.doc$(`users/${feed.uid}`));\r\n        docs.push(this.firestoreService.colWithIds$(`feed/${pid}/comments`, (ref) => ref.where('fid', '==', feed.id)));\r\n\r\n        return combineLatest(docs);\r\n      }),\r\n      map((arr: any) => {\r\n        const joins = ['user', 'comments'].reduce((acc, cur, idx) => {\r\n          return { ...acc, [cur]: arr[idx] };\r\n        }, {});\r\n        return { ...feed, ...joins, userLiked: feed.likes && isArray(feed.likes) ? feed.likes.includes(uid) : false };\r\n      })\r\n    );\r\n  }\r\n\r\n  public searchFeed(val: string) {\r\n    const feed = [...this.feed];\r\n\r\n    if (val && val.trim() !== '') {\r\n      return feed.filter((item) => {\r\n        return (\r\n          item.title.toLowerCase().indexOf(val.toLowerCase()) > -1 ||\r\n          item.subtitle.toLowerCase().indexOf(val.toLowerCase()) > -1 ||\r\n          item.content.toLowerCase().indexOf(val.toLowerCase()) > -1 ||\r\n          item.user.displayName.toLowerCase().indexOf(val.toLowerCase()) > -1\r\n        );\r\n      });\r\n    } else {\r\n      return this.feed;\r\n    }\r\n  }\r\n\r\n  public async upsertPost(post: IFeed) {\r\n    return await this.firestoreService.set(`feed/${post.id}`, post);\r\n  }\r\n\r\n  public async delete(post: IFeed) {\r\n    return await this.firestoreService.delete(`feed/${post.id}`);\r\n  }\r\n\r\n  public getComments(fid: string, uid: string) {\r\n    return this.firestoreService\r\n      .colWithIds$<IComment>(`feed/${fid}/comments`, (ref: any) => ref.limit(20))\r\n      .pipe(\r\n        switchMap((_comment: IComment[]) => {\r\n          const reads = [];\r\n          this.comments = _comment;\r\n          if (this.comments.length > 0) {\r\n            this.comments.forEach((item: IComment) => {\r\n              reads.push(this.firestoreService.doc$(`users/${item.uid}`));\r\n            });\r\n            return combineLatest(reads);\r\n          } else {\r\n            return of([]);\r\n          }\r\n        }),\r\n        map((data: any) => {\r\n          return (this.comments = this.comments.map((item: IComment, index: number) => {\r\n            return {\r\n              ...item,\r\n              user: data[index] || null\r\n            };\r\n          }));\r\n        })\r\n      );\r\n  }\r\n\r\n  public searchComments(val: string) {\r\n    const comments = [...this.comments];\r\n\r\n    if (val && val.trim() !== '') {\r\n      return comments.filter((item) => {\r\n        return (\r\n          item.text.toLowerCase().indexOf(val.toLowerCase()) > -1 || item.user.displayName.toLowerCase().indexOf(val.toLowerCase()) > -1\r\n        );\r\n      });\r\n    } else {\r\n      return this.comments;\r\n    }\r\n  }\r\n\r\n  public async upsertComment(comment: IComment) {\r\n    if (!comment.id) {\r\n      comment.id = this.firestoreService.createId();\r\n    }\r\n    if (comment.user) {\r\n      delete comment.user;\r\n    }\r\n    await this.firestoreService.set(`feed/${comment.fid}/comments/${comment.id}`, comment);\r\n    return this.firestoreService.update(`feed/${comment.fid}`, {\r\n      comments: firebase.firestore.FieldValue.arrayUnion(comment.id)\r\n    });\r\n  }\r\n\r\n  public async deleteComment(comment: IComment) {\r\n    await this.firestoreService.delete(`feed/${comment.fid}/comments/${comment.id}`);\r\n    return this.firestoreService.update(`feed/${comment.fid}`, {\r\n      comments: firebase.firestore.FieldValue.arrayRemove(comment.id)\r\n    });\r\n  }\r\n\r\n  public async like(feed: IFeed) {\r\n    const { uid } = await this.authService.getUser();\r\n    if (!feed.userLiked) {\r\n      this.firestoreService.update(`feed/${feed.id}`, {\r\n        likes: firebase.firestore.FieldValue.arrayUnion(uid)\r\n      });\r\n    } else {\r\n      this.firestoreService.update(`feed/${feed.id}`, {\r\n        likes: firebase.firestore.FieldValue.arrayRemove(uid)\r\n      });\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}
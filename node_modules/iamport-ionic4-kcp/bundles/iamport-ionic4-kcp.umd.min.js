!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@ionic/angular"),require("@ionic-native/file/ngx"),require("@ionic-native/in-app-browser/ngx/index"),require("@ionic-native/file/ngx/index"),require("@angular/core"),require("@ionic-native/in-app-browser/ngx")):"function"==typeof define&&define.amd?define("iamport-ionic4-kcp",["exports","@ionic/angular","@ionic-native/file/ngx","@ionic-native/in-app-browser/ngx/index","@ionic-native/file/ngx/index","@angular/core","@ionic-native/in-app-browser/ngx"],t):t(e["iamport-ionic4-kcp"]={},e.i1,e.ngx,e.i2,e.i3,e.ng.core,e.ngx$1)}(this,function(e,t,i,r,n,o,s){"use strict";var u=(c.prototype.isSuccess=function(){return this.success},c.prototype.getStatus=function(){return this.status},c.prototype.getResponse=function(){return this.response},c);function c(e){this.success=e.success,this.status=e.status,this.response=e}var p=(a.prototype.isSuccess=function(){return this.success},a.prototype.getImpUid=function(){return this.impUid},a.prototype.getMerchantUid=function(){return this.merchantUid},a);function a(e){this.success=e.success,this.impUid=e.imp_uid,this.merchantUid=e.merchant_uid}var l=(f.parseQuery=function(e){var t,i,r={},n=e.split("&");try{for(var o=function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}(n),s=o.next();!s.done;s=o.next()){var c=s.value.split("="),a=decodeURIComponent(c[0]),u=decodeURIComponent(c[1]);"imp_success"===a?r.success="true"===u:r[a]=u}}catch(l){t={error:l}}finally{try{s&&!s.done&&(i=o["return"])&&i.call(o)}finally{if(t)throw t.error}}return r},f.prototype.payment=function(e,c){var a=this;return new Promise(function(s,t){a.platform.ready().then(function(){var i="/_iamport_file_/www/iamport-checkout.html?user-code="+e;a.platform.is("ios")&&(i=a.file.applicationDirectory+"www/iamport-checkout-ios.html?user-code="+e);var r="http://localhost/iamport",n=a.inAppBrowser.create(i,"_blank","location=no"),o=!1;c.m_redirect_url=r,n.on("loadstart").subscribe(function(e){if(e.url.startsWith(r)){var t=e.url.substring(r.length+1),i=f.parseQuery(t);s(new u(i)),n.close()}}),n.on("loadstop").subscribe(function(e){if(!o&&-1<e.url.indexOf(i)){o=!0;var t="IMP.request_pay("+JSON.stringify(c)+", (rsp) => {\n                                                        if( rsp.success ) {\n                                                            location.href = 'http://localhost/iamport?imp_success=true&imp_uid='+rsp.imp_uid+'&merchant_uid='+rsp.merchant_uid+'&vbank_num='+rsp.vbank_num+'&vbank_name='+rsp.vbank_name;\n                                                        } else {\n                                                            location.href = 'http://localhost/iamport?imp_success=false&imp_uid='+rsp.imp_uid+'&merchant_uid='+rsp.merchant_uid+'&error_msg='+rsp.error_msg;\n                                                        }\n                                                   })";n.executeScript({code:t})}},function(e){}),n.on("exit").subscribe(function(e){t("사용자가 결제를 취소하였습니다.")}),n.show()})})},f.prototype.certification=function(e,c){var a=this;return new Promise(function(s,t){a.platform.ready().then(function(){var i="/_iamport_file_/www/iamport-checkout.html?user-code="+e;a.platform.is("ios")&&(i=a.file.applicationDirectory+"www/iamport-checkout-ios.html?user-code="+e);var r="http://localhost/iamport-certification",n=a.inAppBrowser.create(i,"_blank","location=no"),o=!1;n.on("loadstart").subscribe(function(e){if(e.url.startsWith(r)){var t=e.url.substring(r.length+1),i=f.parseQuery(t);s(new p(i)),n.close()}}),n.on("loadstop").subscribe(function(e){if(!o&&-1<e.url.indexOf(i)){o=!0;var t="IMP.certification("+JSON.stringify(c)+", (rsp) => {\n                                                        if( rsp.success ) {\n                                                            location.href = 'http://localhost/iamport-certification?imp_success=true&imp_uid='+rsp.imp_uid+'&merchant_uid='+rsp.merchant_uid;\n                                                        } else {\n                                                            location.href = 'http://localhost/iamport-certification?imp_success=false&imp_uid='+rsp.imp_uid+'&merchant_uid='+rsp.merchant_uid;\n                                                        }\n                                                   })";n.executeScript({code:t})}},function(e){}),n.on("exit").subscribe(function(e){t("사용자가 본인인증을 취소하였습니다.")}),n.show()})})},f.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],f.ctorParameters=function(){return[{type:t.Platform},{type:s.InAppBrowser},{type:i.File}]},f.ngInjectableDef=o.defineInjectable({factory:function(){return new f(o.inject(t.Platform),o.inject(r.InAppBrowser),o.inject(n.File))},token:f,providedIn:"root"}),f);function f(e,t,i){this.platform=e,this.inAppBrowser=t,this.file=i}var m=(d.decorators=[{type:o.NgModule,args:[{declarations:[],imports:[],providers:[s.InAppBrowser],exports:[]}]}],d);function d(){}e.IamportService=l,e.IamportIonic4KcpModule=m,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=iamport-ionic4-kcp.umd.min.js.map
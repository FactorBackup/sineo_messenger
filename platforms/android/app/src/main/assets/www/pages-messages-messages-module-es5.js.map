{"version":3,"sources":["./src/pages/messages/components/messages/messages.component.html","./src/pages/messages/components/messages/messages.component.scss","./src/pages/messages/components/messages/messages.component.ts","./src/pages/messages/messages.module.ts"],"names":[],"mappings":"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","file":"pages-messages-messages-module-es5.js","sourcesContent":["module.exports = \"<ion-toolbar>\\r\\n  <ion-buttons slot=\\\"start\\\">\\r\\n    <ion-menu-button size=\\\"small\\\" autoHide=\\\"true\\\"></ion-menu-button>\\r\\n  </ion-buttons>\\r\\n</ion-toolbar>\\r\\n\\r\\n<ion-content scrollX=\\\"false\\\" scrollY=\\\"false\\\">\\r\\n  <!-- <img src=\\\"../../../../assets/images/new/Background1.jpg\\\" id=\\\"bg\\\" alt=\\\"\\\"> -->\\r\\n  <div class=\\\"content-wrapper\\\">\\r\\n    <!-- start header -->\\r\\n    <div class=\\\"header no-border has-toolbar\\\">\\r\\n      <div class=\\\"title\\\">\\r\\n        {{ 'messages-component.title' | translate }}\\r\\n      </div>\\r\\n      <div class=\\\"options\\\">\\r\\n        <ion-button fill=\\\"clear\\\" size=\\\"small\\\" color=\\\"medium\\\" (click)=\\\"openSearch = !openSearch\\\">\\r\\n          <ion-icon mode=\\\"md\\\" name=\\\"search\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n        <!--<ion-button fill=\\\"clear\\\" size=\\\"small\\\" color=\\\"medium\\\" (click)=\\\"group()\\\">          \\r\\n          <ion-icon color=\\\"medium\\\" src=\\\"../../../../assets/icons/plus.svg\\\"></ion-icon>\\r\\n        </ion-button>-->\\r\\n        <ion-button fill=\\\"clear\\\" size=\\\"small\\\" color=\\\"medium\\\" (click)=\\\"messagesOptions()\\\">\\r\\n          <ion-icon mode=\\\"md\\\" name=\\\"more\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <!-- end header -->\\r\\n\\r\\n    <app-tab-menu [tabs]=\\\"views\\\"></app-tab-menu>\\r\\n    <app-search-bar *ngIf=\\\"openSearch\\\" (event)=\\\"onSearch($event)\\\"></app-search-bar>\\r\\n\\r\\n    <!-- show messages -->\\r\\n    <div class=\\\"content-scroll\\\" *ngIf=\\\"messages.length > 0\\\">\\r\\n      <div class=\\\"messages\\\" *ngFor=\\\"let item of messages\\\">\\r\\n        <!-- selected icon toggle -->\\r\\n        <div class=\\\"action\\\" *ngIf=\\\"getSelection\\\">\\r\\n          <ion-icon\\r\\n            color=\\\"secondary\\\"\\r\\n            (click)=\\\"item.selected = !item.selected\\\"\\r\\n            [src]=\\\"item.selected ? 'assets/icons/check-square.svg' : 'assets/icons/square.svg'\\\"\\r\\n          ></ion-icon>\\r\\n        </div>\\r\\n\\r\\n        <!-- image of receipeint -->\\r\\n        <div\\r\\n          class=\\\"image\\\"\\r\\n          [image-loader]=\\\"getSender(item).photoURL\\\"\\r\\n          (click)=\\\"goto(routes.people, { queryParams: { id: getSender(item).uid } })\\\"\\r\\n        ></div>\\r\\n\\r\\n        <!-- details of chat -->\\r\\n        <div class=\\\"detail\\\" (click)=\\\"openChat(item.id)\\\">\\r\\n          <div class=\\\"name\\\">{{ getSender(item).displayName }}</div>\\r\\n          <div class=\\\"msg\\\">{{ getLastMessage(item)?.value || 'messages-component.start-chatting' | translate }}</div>\\r\\n        </div>\\r\\n\\r\\n        <!--  date and actions button -->\\r\\n        <div class=\\\"date\\\">\\r\\n          <span>{{ item?.updatedAt?.toDate() | amTimeAgo }}</span>\\r\\n          <ion-button fill=\\\"clear\\\" *ngIf=\\\"!getSelection\\\" (click)=\\\"options(item)\\\" color=\\\"medium\\\" size=\\\"small\\\">\\r\\n            <ion-icon name=\\\"more\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <app-no-data *ngIf=\\\"messages.length === 0\\\"></app-no-data>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\\r\\n\\r\\n<ion-footer *ngIf=\\\"!getSelection\\\">\\r\\n  \\r\\n  <ion-tab-bar slot=\\\"bottom\\\">\\r\\n    <ion-tab-button tab=\\\"schedule\\\" (click)=\\\"goto(routes.dashboard)\\\">\\r\\n      <ion-icon src=\\\"../../../../assets/icons/calendar.svg\\\"></ion-icon>\\r\\n      <ion-label>{{ 'page-title.dashboard' | translate }}</ion-label>\\r\\n    </ion-tab-button>\\r\\n    \\r\\n    <ion-tab-button tab=\\\"news\\\" (click)=\\\"goto(routes.feed)\\\">\\r\\n      <ion-icon src=\\\"../../../../assets/icons/rss.svg\\\"></ion-icon>\\r\\n      <ion-label>{{ 'page-title.news' | translate }}</ion-label>\\r\\n    </ion-tab-button>\\r\\n\\r\\n    <ion-tab-button tab=\\\"people\\\" (click)=\\\"goto(routes.people)\\\">\\r\\n      <ion-icon src=\\\"../../../../assets/icons/users.svg\\\"></ion-icon>\\r\\n      <ion-label>{{ 'page-title.people' | translate }}</ion-label>\\r\\n    </ion-tab-button>\\r\\n\\r\\n    <ion-tab-button tab=\\\"about\\\" (click)=\\\"goto(routes.messages)\\\">\\r\\n      <ion-icon src=\\\"../../../../assets/icons/message-square.svg\\\"></ion-icon>\\r\\n      <ion-label>{{ 'page-title.chat' | translate }}</ion-label>\\r\\n    </ion-tab-button>\\r\\n\\r\\n    <ion-tab-button tab=\\\"about\\\" (click)=\\\"goto(routes.setting)\\\">\\r\\n      <ion-icon src=\\\"../../../../assets/icons/settings.svg\\\" ></ion-icon>\\r\\n      <ion-label>{{ 'page-title.setting' | translate }}</ion-label>\\r\\n    </ion-tab-button>\\r\\n  </ion-tab-bar>\\r\\n\\r\\n</ion-footer>\\r\\n\\r\\n<!-- footer with buttons when you select more than one item -->\\r\\n<ion-footer *ngIf=\\\"getSelection\\\">\\r\\n  <div class=\\\"buttons\\\">\\r\\n    <ion-button size=\\\"small\\\" (click)=\\\"markAsRead()\\\">Mark as Read</ion-button>\\r\\n    <ion-button size=\\\"small\\\" (click)=\\\"archieve()\\\" color=\\\"secondary\\\">Archieve</ion-button>\\r\\n    <ion-button size=\\\"small\\\" (click)=\\\"deleteSelected()\\\" color=\\\"danger\\\">Delete</ion-button>\\r\\n    <ion-button (click)=\\\"getSelection = false\\\" color=\\\"dark\\\" fill=\\\"clear\\\">\\r\\n      <ion-icon src=\\\"assets/icons/x.svg\\\"></ion-icon>\\r\\n    </ion-button>\\r\\n  </div>\\r\\n</ion-footer>\\r\\n\"","module.exports = \":host ion-content .content-wrapper .content-scroll {\\n  padding: 0 20px; }\\n  :host ion-content .content-wrapper .content-scroll .messages {\\n    display: -webkit-box;\\n    display: flex;\\n    -webkit-box-align: center;\\n            align-items: center;\\n    margin: 20px 0; }\\n  :host ion-content .content-wrapper .content-scroll .messages .image {\\n      width: 40px;\\n      height: 40px;\\n      border-radius: 50%;\\n      background-size: cover !important; }\\n  :host ion-content .content-wrapper .content-scroll .messages .detail {\\n      margin-left: 15px;\\n      -webkit-box-flex: 1;\\n              flex: 1; }\\n  :host ion-content .content-wrapper .content-scroll .messages .detail .name {\\n        font-weight: 500;\\n        font-size: 16px; }\\n  :host ion-content .content-wrapper .content-scroll .messages .detail .msg {\\n        font-size: 14px;\\n        color: var(--ion-color-medium-shade);\\n        white-space: nowrap;\\n        width: 150px;\\n        text-overflow: ellipsis;\\n        overflow: hidden; }\\n  :host ion-content .content-wrapper .content-scroll .messages .date {\\n      width: 63px;\\n      display: -webkit-box;\\n      display: flex;\\n      -webkit-box-orient: vertical;\\n      -webkit-box-direction: normal;\\n              flex-direction: column;\\n      font-size: 10px;\\n      color: var(--ion-color-medium-shade);\\n      overflow: hidden;\\n      white-space: nowrap; }\\n  :host ion-content .content-wrapper .content-scroll .messages .action {\\n      margin-right: 15px; }\\n  :host ion-footer .buttons {\\n  margin: 5px 0 5px 15px;\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-align: center;\\n          align-items: center; }\\n  :host ion-footer .buttons ion-button {\\n    width: 100%; }\\n  :host ion-footer .buttons ion-button.right {\\n      float: right; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qaW5uL0Rlc2t0b3AvZGV2L3NpbmVvX21lc3Nlbmdlci9zcmMvcGFnZXMvbWVzc2FnZXMvY29tcG9uZW50cy9tZXNzYWdlcy9tZXNzYWdlcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUlRLGVBQWUsRUFBQTtFQUp2QjtJQU9VLG9CQUFhO0lBQWIsYUFBYTtJQUNiLHlCQUFtQjtZQUFuQixtQkFBbUI7SUFDbkIsY0FBYyxFQUFBO0VBVHhCO01BWVksV0FBVztNQUNYLFlBQVk7TUFDWixrQkFBa0I7TUFDbEIsaUNBQWlDLEVBQUE7RUFmN0M7TUFtQlksaUJBQWlCO01BQ2pCLG1CQUFPO2NBQVAsT0FBTyxFQUFBO0VBcEJuQjtRQXVCYyxnQkFBZ0I7UUFDaEIsZUFBZSxFQUFBO0VBeEI3QjtRQTRCYyxlQUFlO1FBQ2Ysb0NBQW9DO1FBQ3BDLG1CQUFtQjtRQUNuQixZQUFZO1FBQ1osdUJBQXVCO1FBQ3ZCLGdCQUFnQixFQUFBO0VBakM5QjtNQXNDWSxXQUFXO01BQ1gsb0JBQWE7TUFBYixhQUFhO01BQ2IsNEJBQXNCO01BQXRCLDZCQUFzQjtjQUF0QixzQkFBc0I7TUFDdEIsZUFBZTtNQUNmLG9DQUFvQztNQUNwQyxnQkFBZ0I7TUFDaEIsbUJBQW1CLEVBQUE7RUE1Qy9CO01BK0NZLGtCQUFrQixFQUFBO0VBL0M5QjtFQXVETSxzQkFBc0I7RUFDdEIsb0JBQWE7RUFBYixhQUFhO0VBQ2IseUJBQW1CO1VBQW5CLG1CQUFtQixFQUFBO0VBekR6QjtJQTJEUSxXQUFXLEVBQUE7RUEzRG5CO01BNkRVLFlBQVksRUFBQSIsImZpbGUiOiJzcmMvcGFnZXMvbWVzc2FnZXMvY29tcG9uZW50cy9tZXNzYWdlcy9tZXNzYWdlcy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcclxuICBpb24tY29udGVudCB7XHJcbiAgICAuY29udGVudC13cmFwcGVyIHtcclxuICAgICAgLmNvbnRlbnQtc2Nyb2xsIHtcclxuICAgICAgICBwYWRkaW5nOiAwIDIwcHg7XHJcblxyXG4gICAgICAgIC5tZXNzYWdlcyB7XHJcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgICAgIG1hcmdpbjogMjBweCAwO1xyXG5cclxuICAgICAgICAgIC5pbWFnZSB7XHJcbiAgICAgICAgICAgIHdpZHRoOiA0MHB4O1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDQwcHg7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlciAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC5kZXRhaWwge1xyXG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogMTVweDtcclxuICAgICAgICAgICAgZmxleDogMTtcclxuXHJcbiAgICAgICAgICAgIC5uYW1lIHtcclxuICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xyXG4gICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLm1zZyB7XHJcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbWVkaXVtLXNoYWRlKTtcclxuICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gICAgICAgICAgICAgIHdpZHRoOiAxNTBweDtcclxuICAgICAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcclxuICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLmRhdGUge1xyXG4gICAgICAgICAgICB3aWR0aDogNjNweDtcclxuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4O1xyXG4gICAgICAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLW1lZGl1bS1zaGFkZSk7XHJcbiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAuYWN0aW9uIHtcclxuICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBpb24tZm9vdGVyIHtcclxuICAgIC5idXR0b25zIHtcclxuICAgICAgbWFyZ2luOiA1cHggMCA1cHggMTVweDtcclxuICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgaW9uLWJ1dHRvbiB7XHJcbiAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgJi5yaWdodCB7XHJcbiAgICAgICAgICBmbG9hdDogcmlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ== */\"","import { Component, Injector, OnInit } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { switchMap } from 'rxjs/internal/operators/switchMap';\r\nimport { IUser } from 'src/pages/auth/helpers/model';\r\nimport { AuthService } from 'src/pages/auth/services/auth/auth.service';\r\nimport { Extender } from 'src/shared/helpers/extender';\r\nimport { IChat, IMessage } from '../../models/message';\r\nimport { MessagesService } from '../../services/messages/messages.service';\r\nimport { MessageComponent } from '../message/message.component';\r\nimport { GroupmodalPage } from '../../../../app/groupmodal/components/groupmodal.page'\r\nimport { ModalController } from '@ionic/angular'\r\n\r\nimport { Platform } from '@ionic/angular';\r\nimport { Toast } from '@ionic-native/toast/ngx';\r\n/*\r\n * view users messages, manage messages.\r\n */\r\n@Component({\r\n  selector: 'app-messages',\r\n  templateUrl: './messages.component.html',\r\n  styleUrls: ['./messages.component.scss']\r\n})\r\nexport class MessagesComponent extends Extender implements OnInit {\r\n  back_clicked = 0;\r\n  public allMessages: IMessage[] = [];\r\n  public messages: IMessage[] = [];\r\n  public currentUser: IUser;\r\n  public getSelection: boolean = false;\r\n  public openSearch: boolean = false;\r\n  public view$ = new Subject<boolean>();\r\n  /** get tab data to use as input for app-tab-menu component */\r\n  public views: IViews[] = [\r\n    {\r\n      id: 0,\r\n      active: true,\r\n      name: this.translate.instant('messages-component.tab-all'),\r\n      event: () => {\r\n        this.view$.next(false);\r\n      }\r\n    },\r\n    {\r\n      id: 2,\r\n      name: this.translate.instant('messages-component.tab-archived'),\r\n      event: () => {\r\n        this.view$.next(true);\r\n      }\r\n    }\r\n  ];\r\n\r\n  constructor(\r\n    protected injector: Injector, \r\n    public readonly platform: Platform,\r\n    private nativeToast: Toast,\r\n    private authService: AuthService, \r\n    private messageService: MessagesService, \r\n    public modalController: ModalController) {\r\n    super(injector);\r\n  }\r\n\r\n  /**\r\n   * subscribe to view change events from tab component changes,\r\n   * create a switch map to get data based on view change\r\n   * if isArchieved view is clicked show archieved messages\r\n   * emit event for no archieved messages on initialization\r\n   */\r\n  public async ngOnInit() {\r\n    this.appExitConfig();\r\n    this.currentUser = await this.authService.getUser();\r\n    const queryObservable = this.view$.pipe(switchMap((view) => this.messageService.getMessages(this.currentUser.uid, view)));\r\n    this.subscriptions.push(\r\n      queryObservable.subscribe((queryItems) => {\r\n        this.messages = this.allMessages = queryItems;\r\n      })\r\n    );\r\n    this.view$.next(false);\r\n  }\r\n  private appExitConfig() {\r\n    this.platform.backButton.subscribe(async () => {\r\n        if (this.back_clicked === 0) {\r\n            this.back_clicked++;\r\n  \r\n            const toast = await this.toastCtrl.create({\r\n                message: '뒤로가기 버튼을 한번 더 누르시면 앱이 종료됩니다.',\r\n                duration: 2000\r\n            });\r\n            toast.present();\r\n  \r\n            setTimeout(() => {\r\n                this.back_clicked = 0;\r\n            }, 2000);\r\n        } else {\r\n            navigator['app'].exitApp();\r\n        }\r\n    });\r\n  }\r\n  public async group (){\r\n    const modal = await this.modalController.create({\r\n      component: GroupmodalPage,\r\n      animated:true,\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  /** on view enter, if route contains an id, open chat belonging to that id in a modal straight away */\r\n  public ionViewDidEnter() {\r\n    const messageId = this.activatedRoute.snapshot.params && this.activatedRoute.snapshot.params.id;\r\n\r\n    if (messageId) {\r\n      this.openChat(messageId);\r\n    }\r\n  }\r\n\r\n  /** search messages by participant name */\r\n  public onSearch(val: string): void {\r\n    if (val && val.trim() !== '') {\r\n      this.messages = this.allMessages.filter((item) => {\r\n        return item.participants.find((user) => user.displayName.toLowerCase().indexOf(val.toLowerCase()) > -1);\r\n      });\r\n    } else {\r\n      this.messages = this.allMessages;\r\n    }\r\n  }\r\n\r\n  /** used in template to retrieve details of receiving user for the message\r\n   * if currentUser's id doesn't match another user in list, get the other users data as a recipient\r\n   */\r\n  public getSender(message: IMessage) {\r\n    return message.participants.find((user: IUser) => user.uid !== this.currentUser.uid);\r\n  }\r\n\r\n  /** get last message sent in conversation or default to start chatting */\r\n  public getLastMessage(message: IMessage): IChat | { value: string } {\r\n    return message.messages && message.messages.length > 0 ? message.messages[message.messages.length - 1] : null;\r\n  }\r\n\r\n  /** open chat in a model */\r\n  public async openChat(message: string) {\r\n    const modal = await this.openModal(MessageComponent, message);\r\n    modal.present();\r\n  }\r\n\r\n  /** action sheet with options for a single chat,\r\n   * allow user to mark message as read, archive chat and delete a chat\r\n   */\r\n  public async options(chat: IMessage) {\r\n    const asCtrl = await this.actionSheetCtrl.create({\r\n      header: this.translate.instant('messages-component.manage-chat'),\r\n      buttons: [\r\n        {\r\n          text: this.translate.instant('messages-component.mark-as-read'),\r\n          handler: () => {\r\n            chat.isRead = true;\r\n            this.messageService.updateMessage(chat);\r\n          }\r\n        },\r\n        {\r\n          text: this.translate.instant('messages-component.archieved'),\r\n          handler: () => {\r\n            chat.isArchieved = true;\r\n            this.messageService.updateMessage(chat);\r\n          }\r\n        },\r\n        {\r\n          text: this.translate.instant('messages-component.delete'),\r\n          handler: () => {\r\n            this.messageService.deleteMessage(chat);\r\n          }\r\n        },\r\n        {\r\n          text: this.translate.instant('other.close'),\r\n          role: 'cancel'\r\n        }\r\n      ]\r\n    });\r\n    asCtrl.present();\r\n  }\r\n\r\n  /** action sheet with options for selected chat,\r\n   * allow user to mark message as read, archive chat and delete a chat\r\n   */\r\n  public async messagesOptions() {\r\n    const asCtrl = await this.actionSheetCtrl.create({\r\n      header: this.translate.instant('messages-component.manage-messages'),\r\n      buttons: [\r\n        {\r\n          text: this.translate.instant('messages-component.select'),\r\n          handler: () => {\r\n            this.getSelection = true;\r\n          }\r\n        },\r\n        {\r\n          text: this.translate.instant('messages-component.select-all'),\r\n          handler: () => {\r\n            this.selectAll();\r\n          }\r\n        },\r\n        {\r\n          text: this.translate.instant('messages-component.delete-all'),\r\n          handler: () => {\r\n            this.messageService.deleteAllMessages(this.messages.length);\r\n          }\r\n        },\r\n        {\r\n          text: this.translate.instant('other.close'),\r\n          role: 'cancel'\r\n        }\r\n      ]\r\n    });\r\n    asCtrl.present();\r\n  }\r\n\r\n  /** mark multiple selected messages as read */\r\n  public markAsRead() {\r\n    const selected = this.messages.filter((msg) => msg.selected === true);\r\n    selected.forEach((item) => {\r\n      item.isRead = true;\r\n      this.messageService.updateMessage(item);\r\n    });\r\n    this.getSelection = false;\r\n  }\r\n\r\n  /** archive multiple messages */\r\n  public archieve() {\r\n    const selected = this.messages.filter((msg) => msg.selected === true);\r\n    selected.forEach((item) => {\r\n      item.isArchieved = true;\r\n      this.messageService.updateMessage(item);\r\n    });\r\n    this.getSelection = false;\r\n  }\r\n\r\n  /** delete selected messages */\r\n  public deleteSelected() {\r\n    const selected = this.messages.filter((msg) => msg.selected === true);\r\n    selected.forEach((item) => {\r\n      this.messageService.deleteMessage(item);\r\n    });\r\n    this.getSelection = false;\r\n  }\r\n\r\n  /** select all messages */\r\n  private selectAll() {\r\n    this.getSelection = true;\r\n    this.messages.map((message) => {\r\n      message.selected = true;\r\n      return message;\r\n    });\r\n  }\r\n}\r\n\r\ninterface IViews {\r\n  id: number;\r\n  name: string;\r\n  active?: boolean;\r\n  event?: any;\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { SharedModule } from 'src/shared/shared.module';\r\nimport { MessageComponent } from './components/message/message.component';\r\nimport { MessagesComponent } from './components/messages/messages.component';\r\n\r\n@NgModule({\r\n  declarations: [MessagesComponent, MessageComponent],\r\n  entryComponents: [MessageComponent],\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: MessagesComponent\r\n      },\r\n      {\r\n        path: ':id',\r\n        component: MessagesComponent\r\n      }\r\n    ])\r\n  ]\r\n})\r\nexport class MessagesModule { }\r\n"],"sourceRoot":""}
{"version":3,"sources":["./src/pages/messages/components/messages/messages.component.html","./src/pages/messages/components/messages/messages.component.scss","./src/pages/messages/components/messages/messages.component.ts","./src/pages/messages/messages.module.ts"],"names":[],"mappings":"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","file":"pages-messages-messages-module-es2015.js","sourcesContent":["module.exports = \"<ion-toolbar>\\r\\n  <ion-buttons slot=\\\"start\\\">\\r\\n    <ion-menu-button size=\\\"small\\\" autoHide=\\\"true\\\"></ion-menu-button>\\r\\n  </ion-buttons>\\r\\n</ion-toolbar>\\r\\n\\r\\n<ion-content scrollX=\\\"false\\\" scrollY=\\\"false\\\">\\r\\n  <!-- <img src=\\\"../../../../assets/images/new/Background1.jpg\\\" id=\\\"bg\\\" alt=\\\"\\\"> -->\\r\\n  <div class=\\\"content-wrapper\\\">\\r\\n    <!-- start header -->\\r\\n    <div class=\\\"header no-border has-toolbar\\\">\\r\\n      <div class=\\\"title\\\">\\r\\n        {{ 'messages-component.title' | translate }}\\r\\n      </div>\\r\\n      <div class=\\\"options\\\">\\r\\n        <ion-button fill=\\\"clear\\\" size=\\\"small\\\" color=\\\"medium\\\" (click)=\\\"openSearch = !openSearch\\\">\\r\\n          <ion-icon mode=\\\"md\\\" name=\\\"search\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n        <ion-button fill=\\\"clear\\\" size=\\\"small\\\" color=\\\"medium\\\" (click)=\\\"group()\\\">          \\r\\n          <ion-icon color=\\\"medium\\\" src=\\\"../../../../assets/icons/plus.svg\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n        <ion-button fill=\\\"clear\\\" size=\\\"small\\\" color=\\\"medium\\\" (click)=\\\"messagesOptions()\\\">\\r\\n          <ion-icon mode=\\\"md\\\" name=\\\"more\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n      </div>\\r\\n    </div>\\r\\n    <!-- end header -->\\r\\n\\r\\n    <app-tab-menu [tabs]=\\\"views\\\"></app-tab-menu>\\r\\n    <app-search-bar *ngIf=\\\"openSearch\\\" (event)=\\\"onSearch($event)\\\"></app-search-bar>\\r\\n\\r\\n    <!-- show messages -->\\r\\n    <div class=\\\"content-scroll\\\" *ngIf=\\\"messages.length > 0\\\">\\r\\n      <div class=\\\"messages\\\" *ngFor=\\\"let item of messages\\\">\\r\\n        <!-- selected icon toggle -->\\r\\n        <div class=\\\"action\\\" *ngIf=\\\"getSelection\\\">\\r\\n          <ion-icon\\r\\n            color=\\\"secondary\\\"\\r\\n            (click)=\\\"item.selected = !item.selected\\\"\\r\\n            [src]=\\\"item.selected ? 'assets/icons/check-square.svg' : 'assets/icons/square.svg'\\\"\\r\\n          ></ion-icon>\\r\\n        </div>\\r\\n\\r\\n        <!-- image of receipeint -->\\r\\n        <div\\r\\n          class=\\\"image\\\"\\r\\n          [image-loader]=\\\"getSender(item).photoURL\\\"\\r\\n          (click)=\\\"goto(routes.people, { queryParams: { id: getSender(item).uid } })\\\"\\r\\n        ></div>\\r\\n\\r\\n        <!-- details of chat -->\\r\\n        <div class=\\\"detail\\\" (click)=\\\"openChat(item.id)\\\">\\r\\n          <div class=\\\"name\\\">{{ getSender(item).displayName }}</div>\\r\\n          <div class=\\\"msg\\\">{{ getLastMessage(item)?.value || 'messages-component.start-chatting' | translate }}</div>\\r\\n        </div>\\r\\n\\r\\n        <!--  date and actions button -->\\r\\n        <div class=\\\"date\\\">\\r\\n          <span>{{ item?.updatedAt?.toDate() | amTimeAgo }}</span>\\r\\n          <ion-button fill=\\\"clear\\\" *ngIf=\\\"!getSelection\\\" (click)=\\\"options(item)\\\" color=\\\"medium\\\" size=\\\"small\\\">\\r\\n            <ion-icon name=\\\"more\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <app-no-data *ngIf=\\\"messages.length === 0\\\"></app-no-data>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\\r\\n\\r\\n<ion-footer *ngIf=\\\"!getSelection\\\">\\r\\n  \\r\\n  <ion-tab-bar slot=\\\"bottom\\\">\\r\\n    <ion-tab-button tab=\\\"schedule\\\" (click)=\\\"goto(routes.dashboard)\\\">\\r\\n      <ion-icon src=\\\"../../../../assets/icons/calendar.svg\\\"></ion-icon>\\r\\n      <ion-label>{{ 'page-title.dashboard' | translate }}</ion-label>\\r\\n    </ion-tab-button>\\r\\n    \\r\\n    <ion-tab-button tab=\\\"news\\\" (click)=\\\"goto(routes.feed)\\\">\\r\\n      <ion-icon src=\\\"../../../../assets/icons/rss.svg\\\"></ion-icon>\\r\\n      <ion-label>{{ 'page-title.news' | translate }}</ion-label>\\r\\n    </ion-tab-button>\\r\\n\\r\\n    <ion-tab-button tab=\\\"people\\\" (click)=\\\"goto(routes.people)\\\">\\r\\n      <ion-icon src=\\\"../../../../assets/icons/users.svg\\\"></ion-icon>\\r\\n      <ion-label>{{ 'page-title.people' | translate }}</ion-label>\\r\\n    </ion-tab-button>\\r\\n\\r\\n    <ion-tab-button tab=\\\"about\\\" (click)=\\\"goto(routes.messages)\\\">\\r\\n      <ion-icon src=\\\"../../../../assets/icons/message-square.svg\\\"></ion-icon>\\r\\n      <ion-label>{{ 'page-title.chat' | translate }}</ion-label>\\r\\n    </ion-tab-button>\\r\\n\\r\\n    <ion-tab-button tab=\\\"about\\\" (click)=\\\"goto(routes.setting)\\\">\\r\\n      <ion-icon src=\\\"../../../../assets/icons/settings.svg\\\" ></ion-icon>\\r\\n      <ion-label>{{ 'page-title.setting' | translate }}</ion-label>\\r\\n    </ion-tab-button>\\r\\n  </ion-tab-bar>\\r\\n\\r\\n</ion-footer>\\r\\n\\r\\n<!-- footer with buttons when you select more than one item -->\\r\\n<ion-footer *ngIf=\\\"getSelection\\\">\\r\\n  <div class=\\\"buttons\\\">\\r\\n    <ion-button size=\\\"small\\\" (click)=\\\"markAsRead()\\\">Mark as Read</ion-button>\\r\\n    <ion-button size=\\\"small\\\" (click)=\\\"archieve()\\\" color=\\\"secondary\\\">Archieve</ion-button>\\r\\n    <ion-button size=\\\"small\\\" (click)=\\\"deleteSelected()\\\" color=\\\"danger\\\">Delete</ion-button>\\r\\n    <ion-button (click)=\\\"getSelection = false\\\" color=\\\"dark\\\" fill=\\\"clear\\\">\\r\\n      <ion-icon src=\\\"assets/icons/x.svg\\\"></ion-icon>\\r\\n    </ion-button>\\r\\n  </div>\\r\\n</ion-footer>\\r\\n\"","module.exports = \":host ion-content .content-wrapper .content-scroll {\\n  padding: 0 20px; }\\n  :host ion-content .content-wrapper .content-scroll .messages {\\n    display: -webkit-box;\\n    display: flex;\\n    -webkit-box-align: center;\\n            align-items: center;\\n    margin: 20px 0; }\\n  :host ion-content .content-wrapper .content-scroll .messages .image {\\n      height: 60px;\\n      width: 60px;\\n      border-radius: 3px;\\n      box-shadow: 1px 1px 12px var(--ion-color-light-shade); }\\n  :host ion-content .content-wrapper .content-scroll .messages .detail {\\n      margin-left: 15px;\\n      -webkit-box-flex: 1;\\n              flex: 1; }\\n  :host ion-content .content-wrapper .content-scroll .messages .detail .name {\\n        font-weight: 500;\\n        font-size: 16px; }\\n  :host ion-content .content-wrapper .content-scroll .messages .detail .msg {\\n        font-size: 14px;\\n        color: var(--ion-color-medium-shade);\\n        white-space: nowrap;\\n        width: 150px;\\n        text-overflow: ellipsis;\\n        overflow: hidden; }\\n  :host ion-content .content-wrapper .content-scroll .messages .date {\\n      width: 63px;\\n      display: -webkit-box;\\n      display: flex;\\n      -webkit-box-orient: vertical;\\n      -webkit-box-direction: normal;\\n              flex-direction: column;\\n      font-size: 10px;\\n      color: var(--ion-color-medium-shade);\\n      overflow: hidden;\\n      white-space: nowrap; }\\n  :host ion-content .content-wrapper .content-scroll .messages .action {\\n      margin-right: 15px; }\\n  :host ion-footer .buttons {\\n  margin: 5px 0 5px 15px;\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-align: center;\\n          align-items: center; }\\n  :host ion-footer .buttons ion-button {\\n    width: 100%; }\\n  :host ion-footer .buttons ion-button.right {\\n      float: right; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qaW5uL0Rlc2t0b3AvZGV2L3NpbmVvX21lc3Nlbmdlci9zcmMvcGFnZXMvbWVzc2FnZXMvY29tcG9uZW50cy9tZXNzYWdlcy9tZXNzYWdlcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUlRLGVBQWUsRUFBQTtFQUp2QjtJQU9VLG9CQUFhO0lBQWIsYUFBYTtJQUNiLHlCQUFtQjtZQUFuQixtQkFBbUI7SUFDbkIsY0FBYyxFQUFBO0VBVHhCO01BWVksWUFBWTtNQUNaLFdBQVc7TUFDWCxrQkFBa0I7TUFDbEIscURBQXFELEVBQUE7RUFmakU7TUFtQlksaUJBQWlCO01BQ2pCLG1CQUFPO2NBQVAsT0FBTyxFQUFBO0VBcEJuQjtRQXVCYyxnQkFBZ0I7UUFDaEIsZUFBZSxFQUFBO0VBeEI3QjtRQTRCYyxlQUFlO1FBQ2Ysb0NBQW9DO1FBQ3BDLG1CQUFtQjtRQUNuQixZQUFZO1FBQ1osdUJBQXVCO1FBQ3ZCLGdCQUFnQixFQUFBO0VBakM5QjtNQXNDWSxXQUFXO01BQ1gsb0JBQWE7TUFBYixhQUFhO01BQ2IsNEJBQXNCO01BQXRCLDZCQUFzQjtjQUF0QixzQkFBc0I7TUFDdEIsZUFBZTtNQUNmLG9DQUFvQztNQUNwQyxnQkFBZ0I7TUFDaEIsbUJBQW1CLEVBQUE7RUE1Qy9CO01BK0NZLGtCQUFrQixFQUFBO0VBL0M5QjtFQXVETSxzQkFBc0I7RUFDdEIsb0JBQWE7RUFBYixhQUFhO0VBQ2IseUJBQW1CO1VBQW5CLG1CQUFtQixFQUFBO0VBekR6QjtJQTJEUSxXQUFXLEVBQUE7RUEzRG5CO01BNkRVLFlBQVksRUFBQSIsImZpbGUiOiJzcmMvcGFnZXMvbWVzc2FnZXMvY29tcG9uZW50cy9tZXNzYWdlcy9tZXNzYWdlcy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcclxuICBpb24tY29udGVudCB7XHJcbiAgICAuY29udGVudC13cmFwcGVyIHtcclxuICAgICAgLmNvbnRlbnQtc2Nyb2xsIHtcclxuICAgICAgICBwYWRkaW5nOiAwIDIwcHg7XHJcblxyXG4gICAgICAgIC5tZXNzYWdlcyB7XHJcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgICAgIG1hcmdpbjogMjBweCAwO1xyXG5cclxuICAgICAgICAgIC5pbWFnZSB7XHJcbiAgICAgICAgICAgIGhlaWdodDogNjBweDtcclxuICAgICAgICAgICAgd2lkdGg6IDYwcHg7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcclxuICAgICAgICAgICAgYm94LXNoYWRvdzogMXB4IDFweCAxMnB4IHZhcigtLWlvbi1jb2xvci1saWdodC1zaGFkZSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLmRldGFpbCB7XHJcbiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxNXB4O1xyXG4gICAgICAgICAgICBmbGV4OiAxO1xyXG5cclxuICAgICAgICAgICAgLm5hbWUge1xyXG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAubXNnIHtcclxuICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1tZWRpdW0tc2hhZGUpO1xyXG4gICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgICAgICAgICAgICAgd2lkdGg6IDE1MHB4O1xyXG4gICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xyXG4gICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAuZGF0ZSB7XHJcbiAgICAgICAgICAgIHdpZHRoOiA2M3B4O1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgICAgICAgICBmb250LXNpemU6IDEwcHg7XHJcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbWVkaXVtLXNoYWRlKTtcclxuICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC5hY3Rpb24ge1xyXG4gICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlvbi1mb290ZXIge1xyXG4gICAgLmJ1dHRvbnMge1xyXG4gICAgICBtYXJnaW46IDVweCAwIDVweCAxNXB4O1xyXG4gICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICBpb24tYnV0dG9uIHtcclxuICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAmLnJpZ2h0IHtcclxuICAgICAgICAgIGZsb2F0OiByaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19 */\"","import { Component, Injector, OnInit } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { switchMap } from 'rxjs/internal/operators/switchMap';\r\nimport { IUser } from 'src/pages/auth/helpers/model';\r\nimport { AuthService } from 'src/pages/auth/services/auth/auth.service';\r\nimport { Extender } from 'src/shared/helpers/extender';\r\nimport { IChat, IMessage } from '../../models/message';\r\nimport { MessagesService } from '../../services/messages/messages.service';\r\nimport { MessageComponent } from '../message/message.component';\r\nimport { GroupmodalPage } from '../../../../app/groupmodal/components/groupmodal.page'\r\nimport { ModalController } from '@ionic/angular'\r\n\r\nimport { Platform } from '@ionic/angular';\r\nimport { Toast } from '@ionic-native/toast/ngx';\r\n/*\r\n * view users messages, manage messages.\r\n */\r\n@Component({\r\n  selector: 'app-messages',\r\n  templateUrl: './messages.component.html',\r\n  styleUrls: ['./messages.component.scss']\r\n})\r\nexport class MessagesComponent extends Extender implements OnInit {\r\n  back_clicked = 0;\r\n  public allMessages: IMessage[] = [];\r\n  public messages: IMessage[] = [];\r\n  public currentUser: IUser;\r\n  public getSelection: boolean = false;\r\n  public openSearch: boolean = false;\r\n  public view$ = new Subject<boolean>();\r\n  /** get tab data to use as input for app-tab-menu component */\r\n  public views: IViews[] = [\r\n    {\r\n      id: 0,\r\n      active: true,\r\n      name: this.translate.instant('messages-component.tab-all'),\r\n      event: () => {\r\n        this.view$.next(false);\r\n      }\r\n    },\r\n    {\r\n      id: 2,\r\n      name: this.translate.instant('messages-component.tab-archived'),\r\n      event: () => {\r\n        this.view$.next(true);\r\n      }\r\n    }\r\n  ];\r\n\r\n  constructor(\r\n    protected injector: Injector, \r\n    public readonly platform: Platform,\r\n    private nativeToast: Toast,\r\n    private authService: AuthService, \r\n    private messageService: MessagesService, \r\n    public modalController: ModalController) {\r\n    super(injector);\r\n  }\r\n\r\n  /**\r\n   * subscribe to view change events from tab component changes,\r\n   * create a switch map to get data based on view change\r\n   * if isArchieved view is clicked show archieved messages\r\n   * emit event for no archieved messages on initialization\r\n   */\r\n  public async ngOnInit() {\r\n    this.appExitConfig();\r\n    this.currentUser = await this.authService.getUser();\r\n    const queryObservable = this.view$.pipe(switchMap((view) => this.messageService.getMessages(this.currentUser.uid, view)));\r\n    this.subscriptions.push(\r\n      queryObservable.subscribe((queryItems) => {\r\n        this.messages = this.allMessages = queryItems;\r\n      })\r\n    );\r\n    this.view$.next(false);\r\n  }\r\n  private appExitConfig() {\r\n    this.platform.backButton.subscribe(async () => {\r\n        if (this.back_clicked === 0) {\r\n            this.back_clicked++;\r\n  \r\n            const toast = await this.toastCtrl.create({\r\n                message: '뒤로가기 버튼을 한번 더 누르시면 앱이 종료됩니다.',\r\n                duration: 2000\r\n            });\r\n            toast.present();\r\n  \r\n            setTimeout(() => {\r\n                this.back_clicked = 0;\r\n            }, 2000);\r\n        } else {\r\n            navigator['app'].exitApp();\r\n        }\r\n    });\r\n  }\r\n  public async group (){\r\n    const modal = await this.modalController.create({\r\n      component: GroupmodalPage,\r\n      animated:true,\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  /** on view enter, if route contains an id, open chat belonging to that id in a modal straight away */\r\n  public ionViewDidEnter() {\r\n    const messageId = this.activatedRoute.snapshot.params && this.activatedRoute.snapshot.params.id;\r\n\r\n    if (messageId) {\r\n      this.openChat(messageId);\r\n    }\r\n  }\r\n\r\n  /** search messages by participant name */\r\n  public onSearch(val: string): void {\r\n    if (val && val.trim() !== '') {\r\n      this.messages = this.allMessages.filter((item) => {\r\n        return item.participants.find((user) => user.displayName.toLowerCase().indexOf(val.toLowerCase()) > -1);\r\n      });\r\n    } else {\r\n      this.messages = this.allMessages;\r\n    }\r\n  }\r\n\r\n  /** used in template to retrieve details of receiving user for the message\r\n   * if currentUser's id doesn't match another user in list, get the other users data as a recipient\r\n   */\r\n  public getSender(message: IMessage) {\r\n    return message.participants.find((user: IUser) => user.uid !== this.currentUser.uid);\r\n  }\r\n\r\n  /** get last message sent in conversation or default to start chatting */\r\n  public getLastMessage(message: IMessage): IChat | { value: string } {\r\n    return message.messages && message.messages.length > 0 ? message.messages[message.messages.length - 1] : null;\r\n  }\r\n\r\n  /** open chat in a model */\r\n  public async openChat(message: string) {\r\n    const modal = await this.openModal(MessageComponent, message);\r\n    modal.present();\r\n  }\r\n\r\n  /** action sheet with options for a single chat,\r\n   * allow user to mark message as read, archive chat and delete a chat\r\n   */\r\n  public async options(chat: IMessage) {\r\n    const asCtrl = await this.actionSheetCtrl.create({\r\n      header: this.translate.instant('messages-component.manage-chat'),\r\n      buttons: [\r\n        {\r\n          text: this.translate.instant('messages-component.mark-as-read'),\r\n          handler: () => {\r\n            chat.isRead = true;\r\n            this.messageService.updateMessage(chat);\r\n          }\r\n        },\r\n        {\r\n          text: this.translate.instant('messages-component.archieved'),\r\n          handler: () => {\r\n            chat.isArchieved = true;\r\n            this.messageService.updateMessage(chat);\r\n          }\r\n        },\r\n        {\r\n          text: this.translate.instant('messages-component.delete'),\r\n          handler: () => {\r\n            this.messageService.deleteMessage(chat);\r\n          }\r\n        },\r\n        {\r\n          text: this.translate.instant('other.close'),\r\n          role: 'cancel'\r\n        }\r\n      ]\r\n    });\r\n    asCtrl.present();\r\n  }\r\n\r\n  /** action sheet with options for selected chat,\r\n   * allow user to mark message as read, archive chat and delete a chat\r\n   */\r\n  public async messagesOptions() {\r\n    const asCtrl = await this.actionSheetCtrl.create({\r\n      header: this.translate.instant('messages-component.manage-messages'),\r\n      buttons: [\r\n        {\r\n          text: this.translate.instant('messages-component.select'),\r\n          handler: () => {\r\n            this.getSelection = true;\r\n          }\r\n        },\r\n        {\r\n          text: this.translate.instant('messages-component.select-all'),\r\n          handler: () => {\r\n            this.selectAll();\r\n          }\r\n        },\r\n        {\r\n          text: this.translate.instant('messages-component.delete-all'),\r\n          handler: () => {\r\n            this.messageService.deleteAllMessages(this.messages.length);\r\n          }\r\n        },\r\n        {\r\n          text: this.translate.instant('other.close'),\r\n          role: 'cancel'\r\n        }\r\n      ]\r\n    });\r\n    asCtrl.present();\r\n  }\r\n\r\n  /** mark multiple selected messages as read */\r\n  public markAsRead() {\r\n    const selected = this.messages.filter((msg) => msg.selected === true);\r\n    selected.forEach((item) => {\r\n      item.isRead = true;\r\n      this.messageService.updateMessage(item);\r\n    });\r\n    this.getSelection = false;\r\n  }\r\n\r\n  /** archive multiple messages */\r\n  public archieve() {\r\n    const selected = this.messages.filter((msg) => msg.selected === true);\r\n    selected.forEach((item) => {\r\n      item.isArchieved = true;\r\n      this.messageService.updateMessage(item);\r\n    });\r\n    this.getSelection = false;\r\n  }\r\n\r\n  /** delete selected messages */\r\n  public deleteSelected() {\r\n    const selected = this.messages.filter((msg) => msg.selected === true);\r\n    selected.forEach((item) => {\r\n      this.messageService.deleteMessage(item);\r\n    });\r\n    this.getSelection = false;\r\n  }\r\n\r\n  /** select all messages */\r\n  private selectAll() {\r\n    this.getSelection = true;\r\n    this.messages.map((message) => {\r\n      message.selected = true;\r\n      return message;\r\n    });\r\n  }\r\n}\r\n\r\ninterface IViews {\r\n  id: number;\r\n  name: string;\r\n  active?: boolean;\r\n  event?: any;\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { SharedModule } from 'src/shared/shared.module';\r\nimport { MessageComponent } from './components/message/message.component';\r\nimport { MessagesComponent } from './components/messages/messages.component';\r\n\r\n@NgModule({\r\n  declarations: [MessagesComponent, MessageComponent],\r\n  entryComponents: [MessageComponent],\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: MessagesComponent\r\n      },\r\n      {\r\n        path: ':id',\r\n        component: MessagesComponent\r\n      }\r\n    ])\r\n  ]\r\n})\r\nexport class MessagesModule { }\r\n"],"sourceRoot":""}